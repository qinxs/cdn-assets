var customSearch,Debounce=(e,t)=>{let o,a=t||200;return function(){let t=arguments;o&&clearTimeout(o),o=setTimeout(()=>{o=null,e.apply(this,t)},a)}};if(function(e){"use strict";const t=/mobile/i.test(window.navigator.userAgent);var o=80,a=e(".l_header");function n(t,a=o){const n=t.href?e(decodeURI(t.getAttribute("href"))):e(t);e("html, body").animate({scrollTop:n.offset().top-a},500)}function i(){const t=e(".menu .active"),o=e(".s-top"),i=e("h1.title","#header-meta"),l=e(".safearea");t.length&&l&&t.click(e=>{e.preventDefault(),e.stopPropagation(),"/"!=t.attr("href")&&n(l),e.stopImmediatePropagation(),t.unbind("click")}),i.length&&l&&i.click(e=>{e.preventDefault(),e.stopPropagation(),n(l),e.stopImmediatePropagation(),i.unbind("click")}),o.length&&l&&o.click(e=>{e.preventDefault(),e.stopPropagation(),n(l),e.stopImmediatePropagation()});var c=0,r=0;if(e("#pjax-enable-cover").text()){const t=e(".cover-wrapper");t[0]&&("none"!==e(".cover-wrapper#half").css("display")&&(r=240),c=t[0].clientHeight-r)}var s=document.body.scrollTop+r;e(document,window).scroll(Debounce(()=>{let t=e(window).scrollTop();const n=(t+=r)-s;s=t,t>240?(o.addClass("show"),n>0?o.removeClass("hl"):o.addClass("hl")):o.removeClass("show").removeClass("hl"),t-c>-1?a.addClass("show"):a.removeClass("show")}))}function l(){if("true"==e.trim(e("#pjax-ispage").text())&&(window.subData={title:e.trim(e("#pjax-pageTitle").text()),tools:!0}),!window.subData)return;const t=e("header .wrapper"),o=e(".s-comment",t),a=e(".s-toc",t);t.find(".nav-sub .title").text(window.subData.title);let i=document.body.scrollTop;e(document,window).scroll(Debounce(()=>{const o=e(window).scrollTop(),a=o-i;a>=50&&o>100?(i=o,t.addClass("sub")):a<=-50&&(i=o,t.removeClass("sub"))})),e(".l_body article#comments").length?o.click(t=>{t.preventDefault(),t.stopPropagation(),n(e(".l_body article#comments")),t.stopImmediatePropagation()}):o.remove();const l=e(".l_body .toc-wrapper");l.length&&l.children().length?(a.click(e=>{e.stopPropagation(),l.toggleClass("active"),a.toggleClass("active")}),e(document).click(function(e){e.stopPropagation(),l.removeClass("active"),a.removeClass("active")}),e(document,window).scroll(Debounce(()=>{l.removeClass("active"),a.removeClass("active")},100))):a.remove()}function c(){var t=e("body .navigation");t.find("li a.active").removeClass("active"),t.find("div a.active").removeClass("active");var o=null,a=location.pathname.replace(/\/|%|\./g,"");0==a.length&&(a="home");var n=a.match(/page\d{0,}$/g);n&&(n=n[0],a=a.split(n)[0]);var i,l=a.match(/index.html/);l&&(l=l[0],a=a.split(l)[0]),(a=a.replace(/(\[|\]|~|#|@)/g,"\\$1"))&&t&&(o=e("#"+a,t),(i=o)&&i.length&&i.addClass("active").siblings().removeClass("active"))}function r(){t&&(e(document).click(function(t){e(".m-phone .list-v").hide()}),e(window).scroll(Debounce(()=>{e(".m-phone .list-v").hide()})))}function s(){const t=e(".toc-wrapper");if(0===t.length)return;t.click(e=>{e.stopPropagation(),t.addClass("active")}),e(document).click(()=>t.removeClass("active")),t.on("click","a",o=>{o.preventDefault(),o.stopPropagation(),"A"===o.target.tagName?n(o.target,0):"SPAN"===o.target.tagName&&n(o.target.parentElement,0),t.removeClass("active");const a=e(".s-toc");a.length>0&&a.removeClass("active")});let a=Array.from(t.find("li a")),i=()=>a.map(t=>Math.floor(e(decodeURI(t.getAttribute("href"))).offset().top-o)),l=i(),c=e(document).height(),r=()=>{let t=e("html").scrollTop()||e("body").scrollTop();if(e(document).height()!=c&&(t=e("html").scrollTop()||e("body").scrollTop(),c=e(document).height(),l=i()),!l)return;let o,n=0,r=l.length-1;for(;n<r;)l[o=n+r+1>>1]===t?n=r=o:l[o]<t?n=o:r=o-1;e(a).removeClass("active").eq(n).addClass("active")};e(window).scroll(Debounce(()=>{r()}));let s=null;e(window).bind("resize",function(){s&&clearTimeout(s),s=setTimeout(function(){l=i(),r()},100)}),r()}function d(){const t=e(".tabs");if(0===t.length)return;let o=t.find(".nav-tabs .tab");for(var a=0;a<o.length;a++){let e=t.find(o[a].children[0]);e.addClass(e.attr("href")),e.removeAttr("href")}e(".tabs .nav-tabs").on("click","a",t=>{t.preventDefault(),t.stopPropagation();let o=e(t.target.parentElement.parentElement.parentElement);return o.find(".nav-tabs .active").removeClass("active"),o.find(t.target.parentElement).addClass("active"),o.find(".tab-content .active").removeClass("active"),o.find(e(t.target).attr("class")).addClass("active"),!1})}a[0]&&(o=a[0].clientHeight+16),e(function(){var p,h,u;l(),c(),t?e(".m-phone li").click(function(t){t.stopPropagation(),e(e(t.currentTarget).children("ul")).show()}):e(".m-pc li > a[href]").parent().click(function(t){t.stopPropagation(),t.target.origin==t.target.baseURI&&e(".m-pc .list-v").hide()}),r(),p=e(".l_header .switcher .s-search"),h=e(".l_header"),u=e(".l_header .m_search"),0!==p.length&&(p.click(function(e){e.stopPropagation(),h.toggleClass("z_search-open"),p.toggleClass("active"),u.find("input").focus()}),e(document).click(function(e){h.removeClass("z_search-open"),p.removeClass("active")}),u.click(function(e){e.stopPropagation()}),h.ready(function(){h.bind("keydown",function(e){if(9==e.keyCode)return!1;var t,o,a=!!document.all;a?(t=window.event.keyCode,o=window.event):(t=e.which,o=e),9==t&&(a?(o.keyCode=0,o.returnValue=!1):(o.which=0,o.preventDefault()))})})),s(),i(),d(),e(".scroll-down").on("click",function(){n(".safearea")});try{document.addEventListener("pjax:complete",function(){e(function(){o=80,(a=e(".l_header"))[0]&&(o=a[0].clientHeight+16),l(),c(),r(),s(),i(),d();var t=e(".l_header .switcher .s-search"),n=e(".l_header");0!==t.length&&e(document).click(function(e){n.removeClass("z_search-open"),t.removeClass("active")})})})}catch(e){}})}(jQuery),window.location.hash)var checkExist=setInterval(function(){"undefined"!=typeof jQuery&&$("#"+decodeURI(window.location.hash.split("#")[1]).replace(/\ /g,"-")).length&&($("html, body").animate({scrollTop:$("#"+decodeURI(window.location.hash.split("#")[1]).replace(/\ /g,"-")).offset().top-40},500),clearInterval(checkExist))},100);